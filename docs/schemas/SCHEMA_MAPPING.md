# SCHEMA_MAPPING.md

This document defines the 1:1 mapping between schema definition sources (`schemas/*.py`),
corresponding JSON Schema outputs (`interfaces/*.schema.json`), and example payloads
(`docs/modules/<module>/sample_{input,output}.json`).

This mapping ensures every schema is versioned, testable, and traceable across the A3CP system.

---

## Mapping Table

| Pydantic Model (`schemas/`)    | JSON Schema (`interfaces/`)               | Example File(s) (`docs/modules/`)                     |
|--------------------------------|-------------------------------------------|--------------------------------------------------------|
| a3cp_message.py                | interfaces/a3cp_message.schema.json       | input_broker/sample_input.json                         |
| raw_action_record.py          | interfaces/raw_action_record.schema.json  | raw_input_log/sample_input.json                        |
| inference_trace.py            | interfaces/inference_trace.schema.json    | confidence_evaluator/sample_output.json               |
| clarification_event.py        | interfaces/clarification_event.schema.json| clarification_planner/sample_output.json              |

---

## Rules

- Every `*.py` schema must export `schema_version`.
- Every `*.py` must have exactly one matching `*.schema.json` file.
- Every `*.schema.json` must be linked to â‰¥1 example payload (input/output).
- All example files must be valid against the matching schema.
- Missing or mismatched mappings must fail CI via `test_schema_mapping.py`.

---

## Notes

- This file is auto-generated by `scripts/gen_schema_mapping.py`.
- Do not edit manually; regenerate after any schema/interface/example change.
